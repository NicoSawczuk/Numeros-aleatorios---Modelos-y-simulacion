<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./static/bootstrap-4.4.1-dist/css/bootstrap.min.css">
    <script src="./static/jquery/jquery-3.5.0.min.js"></script>
    <script src="./static/bootstrap-4.4.1-dist/js/bootstrap.min.js"></script>

    <!-- Importamos los scripts de los metodoos -->
    <script src="./metodo/vonNeuman.js"></script>
    <script src="./metodo/congruenciaMixto.js"></script>
    <title>Actividad 2 - Numeros aleatorios</title>
</head>

<body class="container">
    <div class="mt-2 card">
        <div class="card-header" style="background-color: rgb(169, 211, 255, 0.8);"><b>Metodos para calcular numeros pseudoaleatorios</b></div>
        <div class="card-body">
            <p class="text-muted card-title">Breve descripcion de como usar</p>
            <div>
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="vonNeuman-tab" data-toggle="tab" href="#vonNeuman" role="tab" aria-controls="vonNeuman" aria-selected="true">Von Neumann</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="congruenciaMixto-tab" data-toggle="tab" href="#congruenciaMixto" role="tab" aria-controls="congruenciaMixto" aria-selected="false">Congruencia Mixto</a>
                    </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="vonNeuman" role="tabpanel" aria-labelledby="vonNeuman-tab">
                        <br>
                        <p class="text-muted card-title">
                            Primer método aritmético para generar nros. pseudoaleatorios. Desarrollado por Von Neumann y Metropolis en 1946.
                            <br> Consiste en:
                            <br>
                            <b>1.</b> Tomar un número cualquiera de 4 (cuatro) dígitos y asignarlo al primer elemento (semilla) de la serie, x1. <br>
                            <b>2.</b> Elevarlo al cuadrado y completar 8 (ocho) cifras, si fuera necesario con ceros a la izquierda. <br>
                            <b>3.</b> Descartar los 2 (dos) primeros dígitos, al igual que los 2 (dos) últimos. <br>
                            <b>4.</b> Tomar los 4 (cuatro) dígitos centrales como elemento siguiente de la sucesión, x2. <br>
                            <b>5.</b> Repetir los pasos del 2 al 4 n veces, siendo n la cantidad de nros pseudoaleatorios a generar </p>
                        <hr>
                        <h5>Generador</h5>
                        <br>
                        <div class="row">
                            <div class="input-group col col-md-8">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="inputGroup-sizing-default" style="width: 150px;">Número inicial</span>
                                </div>
                                <input type="number" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" placeholder="Ingrese un número cualquiera de 4 cifras" id="semilla">
                            </div>
                        </div>
                        <small id="errorSemilla" class="form-text text-danger"></small>
                        <br>

                        <div class="row">
                            <div class="input-group col col-md-8">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="inputGroup-sizing-default" style="width: 150px;">Cant. de números</span>
                                </div>
                                <input type="number" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" placeholder="Ingrese un numero que indique la cantidad de numeros pseudoaleatorios a generar" id="iteraciones">
                            </div>
                        </div>
                        <small id="errorIteraciones" class="form-text text-danger"></small>
                        <br>
                        <button type="button" onclick="obtenerValores()" class="btn btn-primary">Generar</button>
                        <button type="button" onclick="limpiar()" class="btn btn-light">Limpiar todo</button>
                        <br>
                        <br>
                        <div class="card" id="cardResultado" style="display: none;">
                            <div class="card-header bg-info">Resultado</div>
                            <div class="card-body">
                                <table id="tablaVonNeumann" class="table table-striped table-bordered">
                                    <thead class="table-info text-center">
                                        <td>
                                            Iteración
                                        </td>
                                        <td>
                                            X<sub>n</sub>
                                        </td>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="congruenciaMixto" role="tabpanel" aria-labelledby="congruenciaMixto-tab">
                        <br>
                        <p class="text-muted card-title">Breve descripcion de como usar el método de Congruencias Mixto</p>
                        <hr>
                        <h5>Generador</h5>
                        <br>
                        <div class="row">
                            <div class="input-group col col-md-8">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="inputGroup-sizing-default" style="width: 180px;">Semilla (X<sub>0</sub>)</span>
                                </div>
                                <input type="number" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" placeholder="Ingrese un número cualquiera" id="semilla2">
                            </div>
                        </div>
                        <small id="errorSemilla2" class="form-text text-danger"></small>
                        <br>
                        <div class="row">
                            <div class="input-group col col-md-8">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="inputGroup-sizing-default2" style="width: 180px;">Multiplicador (a)</span>
                                </div>
                                <input type="number" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" placeholder="Ingrese un entero impar no divisible por 3 o 5" id="valorA">
                            </div>
                        </div>
                        <small id="errorValorA" class="form-text text-danger"></small>
                        <br>
                        <div class="row">
                            <div class="input-group col col-md-8">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="inputGroup-sizing-default3" style="width: 180px;">Constante Aditiva (c)</span>
                                </div>
                                <input type="number" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" placeholder="Ingrese un entero impar no relativamente primo a M " id="valorC">
                            </div>
                        </div>
                        <small id="errorValorC" class="form-text text-danger"></small>
                        <br>
                        <div class="row">
                            <div class="input-group col col-md-8">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="inputGroup-sizing-default4" style="width: 180px;">Modulo (m)</span>
                                </div>
                                <input type="number" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" placeholder="Ingrese un entero mayor a semilla, a y c" id="valorM">
                            </div>
                        </div>
                        <small id="errorValorM" class="form-text text-danger"></small>
                        <br>
                        <div class="row">
                            <div class="input-group col col-md-8">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="inputGroup-sizing-default4" style="width: 180px;">Iteraciones</span>
                                </div>
                                <input type="number" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default" placeholder="Ingrese el numero de iteraciones" id="iteracionesCM">
                            </div>
                        </div>
                        <small id="errorIteraciones2" class="form-text text-danger"></small>
                        <br>
                        <button type="button" onclick="obtenerValoresCongruencia()" class="btn btn-primary">Generar</button>
                        <button type="button" onclick="limpiarCongruencia()" class="btn btn-light">Limpiar todo</button>
                        <br>
                        <br>
                        <div class="card" id="cardResultadoCongruencia" style="display: none;">
                            <div class="card-header bg-info">Resultado</div>
                            <div class="card-body">
                                <table id="tablaCongruenciaMixta" class="table table-striped table-bordered">
                                    <thead class="table-info text-center">
                                        <td>
                                            Iteración
                                        </td>
                                        <td>
                                            X<sub>n</sub>
                                        </td>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

</body>

<script>
    function obtenerValores() {

        var semilla = $('#semilla').val();
        var n = document.getElementById("iteraciones").value;
        if ($('#semilla').val() == "") {
            $('#errorSemilla').html('Debe ingresar un numero de 4 dígitos');
            if ($('$iteraciones').val() == "") {
                $('#errorIteraciones').html('Debe ingresar un numero mayor a cero')
            }
        } else {
            $('#errorSemilla').html('');
            if (String(semilla).length == 4) {
                var semillaAux = String(semilla);
                if (semillaAux[semillaAux.length] == "0" && semillaAux[semillaAux.length - 1] == "0") {
                    $('#errorSemilla').html('No puede ingresar un numero cuyos valores finales sean cero');
                } else {

                    if ($('#iteraciones').val() == "" || $('#iteraciones').val() == "0") {
                        $('#errorIteraciones').html('Debe ingresar un numero mayor a cero');
                    } else {
                        $('#errorSemilla').html('');
                        $('#errorIteraciones').html('');
                        $('#cardResultado').css({
                            display: "block"
                        });
                        var arregloResultado = metodoVonNeuman(semilla, n);
                        var row = ''
                        $('#tablaVonNeumann tbody').html(row);

                        for (let i = 0; i < arregloResultado.length; i++) {
                            row = '<tr>' +
                                '<td>' +
                                arregloResultado[i][0] +
                                '</td>' +
                                '<td class="text-right">' +
                                arregloResultado[i][1] +
                                '</td>' +
                                '</tr>';

                            $('#tablaVonNeumann tbody').append(row);
                        }
                    }
                }
            } else {
                $('#errorSemilla').html('Debe ingresar un numero de 4 dígitos');
            }
        }

    }

    function limpiar() {
        $('#semilla').val('');
        $('#iteraciones').val('');
        $('#cardResultado').css({
            display: "none"
        });
    }
</script>
<script>
    function obtenerValoresCongruencia() {
        var semilla = $('#semilla2').val();
        var a = $('#valorA').val();
        var c = $('#valorC').val();
        var m = $('#valorM').val();
        var iteraciones = $('#iteracionesCM').val();
        $('#errorSemilla2').html('');
        $('#errorValorA').html('');
        $('#errorValorC').html('');
        $('#errorValorM').html('');
        if (this.validarSemilla() == 1 && this.validarA() == 1 && this.validarC() == 1 && this.validarM() == 1) {

            $('#cardResultadoCongruencia').css({
                display: "block"
            });

            var arregloResultadoCongruencia = metodoCongruenciaMixto(semilla, a, c, m, iteraciones);
            $('#tablaCongruenciaMixta tbody').html('');
            for (let i = 0; i < arregloResultadoCongruencia.length; i++) {
                var row = '<tr>' +
                    '<td>' +
                    arregloResultadoCongruencia[i][0] +
                    '</td>' +
                    '<td class="text-right">' +
                    arregloResultadoCongruencia[i][1] +
                    '</td>' +
                    '</tr>';
                $('#tablaCongruenciaMixta tbody').append(row);
            }
        } else {
            if (this.validarSemilla() != 1) {
                $('#errorSemilla2').html(validarSemilla);
            }
            if (this.validarA() != 1) {
                $('#errorValorA').html(validarA);
            }
            if (this.validarC() != 1) {
                $('#errorValorC').html(validarC);
            }
            if (this.validarM() != 1) {
                $('#errorValorM').html(validarM);
            }
        }


    }


    function limpiarCongruencia() {
        $('#semilla2').val('');
        $('#valorA').val('');
        $('#valorC').val('');
        $('#valorM').val('');
        $('#iteracionesCM').val('');
        $('#cardResultadoCongruencia').css({
            display: "none"
        });
    }

    function validarSemilla() {
        var semilla = $('#semilla2').val();
        if (semilla == "") {
            return 'Debe ingresar un entero positivo';
        }
        semilla = parseInt(semilla);
        if (semilla <= 0) {
            return 'La semilla debe ser mayor a cero';
        }
        return 1;
    }

    function validarA() {
        var a = $('#valorA').val();
        if (a == "") {
            return 'Debe ingresar un entero positivo';
        }
        a = parseInt(a);
        if (a <= 0) {
            return 'El multiplicador a debe ser mayor a cero';
        }
        if ((a % 2) == 0) {
            return 'El multiplicador a debe ser un numero impar';
        }
        if ((a % 3) == 0) {
            return 'El multiplicador a debe no debe ser divisible por 3';
        }
        if ((a % 5) == 0) {
            return 'El multiplicador a debe no debe ser divisible por 5';
        }
        return 1;
    }

    function validarC() {
        var c = $('#valorC').val();
        if (c == "") {
            return 'Debe ingresar un entero positivo';
        }
        c = parseInt(c);
        if (c <= 0) {
            return 'La constante aditiva a debe ser mayor a cero';
        }
        return 1;
    }

    function validarM() {
        var m = $('#valorM').val();
        var a = $('#valorA').val();
        var c = $('#valorC').val();
        var semilla = $('#semilla2').val();
        if (m == "") {
            return 'Debe ingresar un entero positivo';
        }
        semilla = parseInt(semilla);
        c = parseInt(c);
        a = parseInt(a);
        m = parseInt(m);
        if (c <= 0) {
            return 'El modulo m debe ser mayor a cero';
        }
        if (m < semilla && m < a && m < c) {
            return 'El modulo m debe ser mayor a X0, a y c'
        }

        return 1;
    }
</script>

</html>